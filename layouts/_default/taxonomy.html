{{ define "main" }}
<div class="universal-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <div class="mb-4">
                <h1>
                    <i class="fas fa-tag mr-2"></i>{{ .Title }}
                </h1>
                <p class="text-muted">
                    <i class="fas fa-file-alt mr-1"></i>
                    {{ .Data.Term }} 分类下共有 {{ len .Pages }} 篇文章
                </p>

                <!-- 面包屑导航 -->
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="{{ .Site.BaseURL }}">首页</a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="{{ .Site.BaseURL }}categories/">分类</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">
                            {{ .Data.Term }}
                        </li>
                    </ol>
                </nav>
            </div>

            <!-- 文章列表 -->
            {{ $pages := where .Pages "Draft" false }}
            {{ if gt (len $pages) 0 }}
            <div class="post-list">
                {{ range $pages }}
                <article class="post-list-item">
                    <div class="row align-items-center">
                        <div class="col-12 col-md-8">
                            <h4 class="post-title mb-1">
                                <a href="{{ .Permalink }}" class="text-decoration-none">
                                    {{ .Title }}
                                </a>
                            </h4>

                            {{ with .Summary }}
                            <p class="post-summary text-muted mb-2">{{ . | truncate 150 }}</p>
                            {{ end }}

                            <div class="post-meta text-muted small">
                                <span class="mr-3">
                                    <i class="fas fa-calendar mr-1"></i>
                                    {{ .Date.Format "Jan 2, 2006" }}
                                </span>
                                <span class="mr-3">
                                    <i class="fas fa-clock mr-1"></i>
                                    {{ .ReadingTime }} min read
                                </span>

                                {{ if .Params.categories }}
                                <span class="mr-3">
                                    <i class="fas fa-folder mr-1"></i>
                                    {{ range $index, $category := .Params.categories }}
                                    {{ if gt $index 0 }}, {{ end }}
                                    <a href="{{ $.Site.BaseURL }}category/{{ $category | urlize }}/"
                                        class="category-link">
                                        {{ $category }}
                                    </a>
                                    {{ end }}
                                </span>
                                {{ end }}
                            </div>
                        </div>

                        {{ if or .Params.featured_image .Params.image }}
                        <div class="col-12 col-md-4 mt-3 mt-md-0">
                            <div class="post-thumbnail">
                                {{ if .Params.featured_image }}
                                <img src="{{ .Params.featured_image | relURL }}" class="img-fluid rounded"
                                    alt="{{ .Title }}">
                                {{ else if .Params.image }}
                                <img src="{{ .Params.image | relURL }}" class="img-fluid rounded" alt="{{ .Title }}">
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </article>
                {{ end }}
            </div>

            <!-- 分页 -->
            {{ template "_internal/pagination.html" . }}

            {{ else }}
            <div class="alert alert-info">
                <i class="fas fa-info-circle mr-2"></i>
                该分类下暂无已发布的文章。
            </div>
            {{ end }}
        </div>
    </div>
</div>

<style>
    /* 列表式文章展示样式 */
    .post-list {
        margin-top: 2rem;
    }

    .post-list-item {
        padding: 1.5rem 0;
        border-bottom: 1px solid #e9ecef;
        transition: background-color 0.2s;
    }

    .post-list-item:last-child {
        border-bottom: none;
    }

    .post-list-item:hover {
        background-color: #f8f9fa;
        margin: 0 -1rem;
        padding: 1.5rem 1rem;
        border-radius: 0.375rem;
    }

    .post-title a {
        color: #495057;
        font-weight: 600;
    }

    .post-title a:hover {
        color: #007bff;
        text-decoration: none;
    }

    .post-summary {
        font-size: 0.95rem;
        line-height: 1.5;
    }

    .post-meta {
        font-size: 0.85rem;
    }

    .post-meta .category-link {
        color: #6c757d;
        text-decoration: none;
    }

    .post-meta .category-link:hover {
        color: #007bff;
        text-decoration: none;
    }

    .post-thumbnail img {
        max-height: 120px;
        object-fit: cover;
        width: 100%;
    }

    .breadcrumb {
        background-color: #f8f9fa;
        border-radius: 0.375rem;
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
        .post-list-item {
            padding: 1rem 0;
        }

        .post-list-item:hover {
            margin: 0 -0.5rem;
            padding: 1rem 0.5rem;
        }

        .post-meta span {
            display: block;
            margin-bottom: 0.25rem;
        }

        .post-meta span:last-child {
            margin-bottom: 0;
        }
    }
</style>
{{ end }}